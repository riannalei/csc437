<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Travel Planner — Index</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,400;0,700;1,400&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/styles/reset.css" />
  <link rel="stylesheet" href="/styles/tokens.css" />
  <link rel="stylesheet" href="/styles/page.css" />
  <style>
    /* Inline test styles */
    body.dark-mode {
      background-color: #000000 !important;
      color: #ffffff !important;
    }
    body.dark-mode * {
      background-color: #333333 !important;
      color: #ffffff !important;
    }
  </style>
</head>
<body>
<mu-auth provides="blazing:auth">
  <header class="main-header">
    <div class="header-content">
      <div class="header-title">
        <h1>Travel Planner</h1>
        <p>Plan your perfect journey</p>
      </div>
      <nav class="header-nav">
        <span id="auth-status" class="auth-status">
          <a href="/login.html" class="btn-signin">Sign In</a>
        </span>
      </nav>
    </div>
  </header>

<main>
  <section aria-labelledby="destinations">
    <h2 id="destinations">
      <svg class="icon">
        <use href="/icons/travel.svg#icon-location" />
      </svg>
      Destinations
    </h2>
    <ul>
      <li><a href="destination/tokyo.html">Tokyo</a></li>
    </ul>
  </section>

  <section aria-labelledby="flights">
    <h2 id="flights">
      <svg class="icon">
        <use href="/icons/travel.svg#icon-plane" />
      </svg>
      Flights
    </h2>
    <ul>
      <li><a href="flight/ana-united-nyc-nrt-2025-12-20.html">NYC → NRT (codeshare)</a></li>
    </ul>
  </section>

  <section aria-labelledby="traveler">
    <h2 id="traveler">
      <svg class="icon">
        <use href="/icons/travel.svg#icon-traveler" />
      </svg>
      Traveler
    </h2>
    <ul>
      <li><a href="traveler/rianna.html">Rianna</a></li>
    </ul>
  </section>
</main>

<div class="grid-container">
  <section aria-labelledby="airlines">
    <h2 id="airlines">
      <svg class="icon">
        <use href="/icons/travel.svg#icon-plane" />
      </svg>
      Airlines
    </h2>
    <ul>
      <li><a href="airline/ana.html">All Nippon Airways (ANA)</a></li>
      <li><a href="airline/united.html">United Airlines</a></li>
    </ul>
  </section>

  <section aria-labelledby="stays">
    <h2 id="stays">
      <svg class="icon">
        <use href="/icons/travel.svg#icon-bed" />
      </svg>
      Accommodations
    </h2>
    <ul>
      <li><a href="accommodation/shinjuku-ryokan.html">Shinjuku Ryokan (Tokyo)</a></li>
      <li><a href="accommodation/kyoto-inn.html">Kyoto Inn</a></li>
    </ul>
  </section>

  <section aria-labelledby="things">
    <h2 id="things">
      <svg class="icon">
        <use href="/icons/travel.svg#icon-activity" />
      </svg>
      Activities
    </h2>
    <ul>
      <li><a href="activity/tsukiji-food-tour.html">Tsukiji Food Tour</a></li>
      <li><a href="activity/fushimi-inari-hike.html">Fushimi Inari Hike</a></li>
    </ul>
  </section>

  <section aria-labelledby="money">
    <h2 id="money">
      <svg class="icon">
        <use href="/icons/travel.svg#icon-wallet" />
      </svg>
      Finance
    </h2>
    <ul>
      <li><a href="finance/credit-card-rewards.html">Credit Card / Rewards</a></li>
      <li><a href="finance/budget.html">Budget</a></li>
    </ul>
  </section>
</div>

  <footer>
    <small>© 2025 Travel Planner (Prototype)</small>
  </footer>
</mu-auth>

<script type="module">
  import { define, Auth } from "@calpoly/mustang";
  import { TravelSectionElement } from "/src/travel-section.js";
  import { TravelPlannerElement } from "/src/travel-planner.js";

  define({
    "travel-section": TravelSectionElement,
    "travel-planner": TravelPlannerElement,
    "mu-auth": Auth.Provider
  });

  // Auth status update
  const authStatus = document.getElementById("auth-status");
  if (authStatus) {
    document.addEventListener("auth:message", (e: any) => {
      const [action, data] = e.detail;
      if (action === "auth/signin") {
        authStatus.innerHTML = `
          <span class="user-greeting">Welcome!</span>
          <button onclick="signOut()" class="btn-signout">Sign Out</button>
        `;
      } else if (action === "auth/signout") {
        authStatus.innerHTML = `<a href="/login.html" class="btn-signin">Sign In</a>`;
      }
    });
  }

  function signOut() {
    document.dispatchEvent(new CustomEvent("auth:message", {
      bubbles: true,
      composed: true,
      detail: ["auth/signout"]
    }));
    window.location.href = "/login.html";
  }
  (window as any).signOut = signOut;
</script>

<style>
  .main-header {
    background: linear-gradient(135deg, var(--color-primary, #21969a) 0%, var(--color-primary-dark, #17696c) 100%);
    color: white;
    padding: var(--spacing-xl, 2rem) var(--spacing-lg, 1.5rem);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  .header-content {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--spacing-lg);
  }
  .header-title h1 {
    color: white;
    margin: 0 0 var(--spacing-xs, 0.25rem) 0;
    font-size: var(--font-size-3xl, 1.875rem);
  }
  .header-title p {
    color: rgba(255, 255, 255, 0.9);
    margin: 0;
    font-size: var(--font-size-base, 1rem);
  }
  .header-nav {
    display: flex;
    align-items: center;
    gap: var(--spacing-md, 1rem);
  }
  .auth-status {
    display: flex;
    align-items: center;
    gap: var(--spacing-md, 1rem);
  }
  .btn-signin, .btn-signout {
    padding: var(--spacing-sm, 0.5rem) var(--spacing-lg, 1.5rem);
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--border-radius-md, 8px);
    text-decoration: none;
    font-weight: 600;
    transition: all 0.2s ease;
    cursor: pointer;
    font-size: var(--font-size-sm, 0.875rem);
  }
  .btn-signin:hover, .btn-signout:hover {
    background: rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.5);
    transform: translateY(-1px);
  }
  .user-greeting {
    color: rgba(255, 255, 255, 0.9);
    font-weight: 500;
  }
  main {
    padding-top: var(--spacing-xxl, 3rem);
  }
</style>
</body>
</html>

